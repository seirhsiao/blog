window._bd_share_main.F.module("component/pop_popup",function(e,o){var t,d,p,s,u=e("base/tangram").T,i=e("base/class").Class,n=(e("conf/const"),e("component/pop_base")),a=i.create(function(){var a=this;a._poptype=1,a._hide=function(){p&&p.hide(),d&&d.hide()},a._show=function(e,o){!function(e,o){var t=o.bdMini||2,i=o.bdMiniList||a._partnerSort.slice(0,8*t),n=[];u.each(i,function(e,o){n[e]='<li><a href="#" onclick="return false;" class="popup_'+o+'" data-cmd="'+o+'">'+a._partners[o].name+"</a></li>"}),s.html(n.join("")),d.width(110*t+6),p.height(d.outerHeight()),p.width(d.outerWidth())}(a._container,o);var t=a._getPosition(e.element,o);u.each([d,p],function(e,o){o.css({top:t.top,left:t.left}).show()}),u(e.element).one("mouseout",function(){var e=!1;d.one("mouseover",function(){e=!0}),setTimeout(function(){e||a.hide()},300)})},a._getPosition=function(e,o){var t=u(e).offset(),i=t.top+u(e).height()+5,n=t.left,a=d.outerHeight(),p=u(window).scrollTop();(i+a>u("body").height()&&i+a>u(window).height()||i+a>p+u(window).height())&&(i=(i=t.top-a-5)<p?p:i);var s=o.bdPopupOffsetLeft,r=o.bdPopupOffsetTop;return(s||r)&&(i+=0|r,n+=0|s),{top:i,left:n}},a._init=function(){var e="bdSharePopup_"+ +new Date,o=['<iframe frameborder="0" id="'+e+'bg" class="bdshare_popup_bg" style="display:none;"></iframe>'].join(""),t=['<div class="bdshare_popup_box" id="'+e+'box" style="display:none;">','<div class="bdshare_popup_top">',"分享到","</div>",'<ul class="bdshare_popup_list"></ul>','<div class="bdshare_popup_bottom">','<a href="#" onclick="return false;" class="popup_more"  data-cmd="more" target="_blank;">更多...</a>',"</div>","</div>"].join("");u("body").insertHTML("beforeEnd",o+t),a._container=d=u("#"+e+"box"),s=d.find(".bdshare_popup_list"),p=u("#"+e+"bg"),d.mouseleave(a.hide)}},n.PopBase);o.Popup=(t||(t=new a).init(),t)});
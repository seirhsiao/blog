window._bd_share_main.F.module("share/like_api",function(e,n,t){e("base/tangram").T;var i=e("base/class").Class,c=e("share/api_base");n.Api=i.create(function(e){var t=this,i={count:0,clicked:!1};t._init=function(){var n=t.getView();n.render(),n.init(),function(n){window._bd_share_main.F.use("trans/data",function(e){e.get({type:"like_count",url:document.location.href,callback:function(e){n&&n({count:e})}})})}(function(e){i.count=e.count,n.setNumber(e.count)})},t._processAction=function(n){"like"==n.cmd&&(i.clicked?t.getView().showDoneState(n.element):function(n){window._bd_share_main.F.use("trans/trans",function(e){e.run({type:"like",url:document.location.href,callback:function(e){n&&n({err:e})}})})}(function(e){i.clicked=!0,0==e.err?(i.count++,t.getView().addOne(n.element,i.count)):t.getView().showDoneState(n.element)}))}},c.ApiBase)});
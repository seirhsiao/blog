window._bd_share_main.F.module("view/like_view",function(e,t,n){e("like.css");var r=e("base/tangram").T,a=e("base/class").Class,c=e("conf/const"),i=e("view/view_base"),u=e("component/animate"),d="bdlikebutton",v="bdlikebutton-inner",m="bdlikebutton-add",p="bdlikebutton-text",h="bdlikebutton-count";t.View=a.create(function(o){function s(e){return r(e).parent().get(0)}var l=this,n={small:[4,"顶","已顶过"],medium:[6,"顶","您已顶过"],large:[10,"该内容对我有帮助","您已顶过，谢谢！"]};l.render=function(e){var t=function(){var n=o.tag||"";return r("."+d).each(function(e,t){n&&r(t).attr(c.CONFIG_TAG_ATTR)!=n||l._entities.push(t)}),l._entities}(),i=d,s=function(){var e=o,t=n[e.type];return e.likeText=e.likeText?e.likeText.substr(0,t[0]):t[1],e.likedText=e.likedText?e.likedText.substr(0,t[0]):t[2],e}();l._actBtnSet.className=v,l._actBtnSet.tagName="div",l._actBtnSet.maxDomDepth=1,r(t).each(function(e,t){var n=s.type,a=[];a.push('<div class="',v,'" ',l._actBtnSet.cmdAttr,'="like">'),a.push('<span class="',m,'">+1</span>'),a.push('<div class="',h,'">加载中</div>'),"small"!=n&&a.push('<div class="',p,'">',s.likeText,"</div>"),a.push("</div>"),r(t).html(a.join("")).addClass(i+"-"+s.color).addClass(i+"-"+s.type).addClass(i+"-"+s.type+"-"+s.color)})},l._init=function(){var i=o,s=i.type;r(l._entities).each(function(e,n){var a=r("."+v,n);a.mouseover(function(e){var t=(e=r.event(e||window.event)).relatedTarget;a.contains(t)||("small"==s&&r("."+h,n).html(i.likeText),r(n).addClass(d+"-"+i.type+"-"+i.color+"-hover"))}).mouseout(function(e){var t=(e=r.event(e||window.event)).relatedTarget;a.contains(t)||("small"==s?r("."+h,n).html(i.count):r("."+p,n).html(i.likeText),r(n).removeClass(d+"-"+i.type+"-"+i.color+"-hover"))})})},l.showDoneState=function(e){var t=o,n=s(e),a=p;"small"==t.type&&(a=h),r("."+a,n).html(t.likedText),r(n).removeClass(n,d+"-"+t.type+"-"+t.color+"-hover")},l.addOne=function(e,t){var n=o,a=s(e),i=r("."+m,a);i.show(),u.animate(i.get(0),{top:"-25px",opacity:"0"},300,function(){i.hide(),i.css({top:"0px",opacity:99})}),l.setNumber(t),r(a).removeClass(d+"-"+n.type+"-"+n.color+"-hover")},l.setNumber=function(n){"number"==r.type(n)&&r(l._entities).each(function(e,t){r("."+h,t).html(n)})}},i.ViewBase)});
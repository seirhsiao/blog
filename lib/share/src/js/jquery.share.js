!function(s){s.fn.share=function(e){var t=s(document.head),i={url:location.href,site_url:location.origin,source:t.find("[name=site], [name=Site]").attr("content")||document.title,title:t.find("[name=title], [name=Title]").attr("content")||document.title,description:t.find("[name=description], [name=Description]").attr("content")||"",image:s("img:first").prop("src")||"",imageSelector:void 0,weiboKey:"",wechatQrcodeTitle:"微信扫一扫：分享",wechatQrcodeHelper:"<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>",wechatQrcodeSize:100,mobileSites:[],sites:["weibo","qq","wechat","tencent","douban","qzone","linkedin","diandian","facebook","twitter","google"],disabled:[],initialized:!1},n=s.extend({},i,e),o={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}&pics={{IMAGE}}",qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}",tencent:"http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}",weibo:"https://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}",wechat:"javascript:;",douban:"http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11",diandian:"http://www.diandian.com/share?lo={{URL}}&ti={{TITLE}}&type=link",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{SUMMARY}}&source={{SOURCE}}&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u={{URL}}&title={{TITLE}}&description={{DESCRIPTION}}&caption={{SUBHEAD}}&link={{URL}}&picture={{IMAGE}}",twitter:"https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}&via={{SITE_URL}}",google:"https://plus.google.com/share?url={{URL}}"},c={qzone:"QQ空间",qq:"QQ",tencent:"腾讯微博",weibo:"微博",wechat:"微信",douban:"豆瓣",diandian:"点点",linkedin:"LinkedIn",facebook:"Facebook",twitter:"Twitter",google:"Google"};this.each(function(){if(s(this).data("initialized"))return!0;var e=s.extend({},n,s(this).data());e.imageSelector&&(e.image=s(e.imageSelector).map(function(){return s(this).prop("src")}).get().join("||"));var t=s(this).addClass("share-component social-share");!function(a,r){var e=function(e){0===e.mobileSites.length&&e.sites.length&&(e.mobileSites=e.sites);var n=(s(window).width()<=768?e.mobileSites:e.sites.length?e.sites:[]).slice(0),t=e.disabled;"string"==typeof n&&(n=n.split(/\s*,\s*/));"string"==typeof t&&(t=t.split(/\s*,\s*/));/MicroMessenger/i.test(navigator.userAgent)&&t.push("wechat");return t.length&&s.each(t,function(e,t){var i=s.inArray(t,n);-1!==i&&n.splice(i,1)}),n}(r);if("prepend"==r.mode&&e.reverse(),!e.length)return;s.each(e,function(e,t){var i=function(e,t){var i=o[e];for(var n in t.summary=t.description,t)if(t.hasOwnProperty(n)){var a=e+n.replace(/^[a-z]/,function(e){return e.toUpperCase()}),r=encodeURIComponent(void 0===t[a]?t[n]:t[a]);i=i.replace(new RegExp("{{"+n.toUpperCase()+"}}","g"),r)}return i}(t,r),n=r.initialized?a.find(".icon-"+t):s('<a class="social-share-icon icon-'+t+'"></a>');if(!n.length)return!0;n.prop("aria-label","分享到 "+c[t]),n.prop("href",i),"wechat"===t?n.prop("tabindex",-1):n.prop("target","_blank"),r.initialized||("prepend"==r.mode?a.prepend(n):a.append(n))})}(t,e),function(e,t){var i=e.find("a.icon-wechat");if(!i.length)return;i.append('<div class="wechat-qrcode"><h4>'+t.wechatQrcodeTitle+'</h4><div class="qrcode"></div><div class="help">'+t.wechatQrcodeHelper+"</div></div>"),i.find(".qrcode").qrcode({render:"image",size:t.wechatQrcodeSize,text:t.url}),i.offset().top<100&&i.find(".wechat-qrcode").addClass("bottom")}(t,e),s(this).data("initialized",!0)})},s(function(){s(".share-component,.social-share").share()})}(jQuery);